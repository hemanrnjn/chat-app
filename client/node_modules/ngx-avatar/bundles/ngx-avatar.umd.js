(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('is-retina'), require('ts-md5/dist/md5'), require('@angular/core'), require('@angular/common/http'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ngx-avatar', ['exports', 'is-retina', 'ts-md5/dist/md5', '@angular/core', '@angular/common/http', '@angular/common'], factory) :
    (factory((global['ngx-avatar'] = {}),global.isRetina,global.md5,global.ng.core,global.ng.common.http,global.ng.common));
}(this, (function (exports,isRetina,md5,core,http,common) { 'use strict';

    isRetina = isRetina && isRetina.hasOwnProperty('default') ? isRetina['default'] : isRetina;

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * Contract of all async sources.
     * Every async source must implement the processResponse method that extracts the avatar url from the data
     * @abstract
     */
    var /**
     * Contract of all async sources.
     * Every async source must implement the processResponse method that extracts the avatar url from the data
     * @abstract
     */ AsyncSource = /** @class */ (function () {
        function AsyncSource(sourceId) {
            this.sourceId = sourceId;
        }
        return AsyncSource;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var AvatarSource = {
        FACEBOOK: "facebook",
        GOOGLE: "google",
        TWITTER: "twitter",
        VKONTAKTE: "vkontakte",
        SKYPE: "skype",
        GRAVATAR: "gravatar",
        GITHUB: "github",
        CUSTOM: "custom",
        INITIALS: "initials",
        VALUE: "value",
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Facebook source impelementation.
     *  Fetch avatar source based on facebook identifier
     *  and image size
     */
    var /**
     *  Facebook source impelementation.
     *  Fetch avatar source based on facebook identifier
     *  and image size
     */ Facebook = /** @class */ (function () {
        function Facebook(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.FACEBOOK;
        }
        /**
         * @param {?} size
         * @return {?}
         */
        Facebook.prototype.getAvatar = /**
         * @param {?} size
         * @return {?}
         */
            function (size) {
                return 'https://graph.facebook.com/' +
                    (this.sourceId + "/picture?width=" + size + "&height=" + size);
            };
        return Facebook;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Twitter source impelementation.
     *  Fetch avatar source based on google identifier
     *  and image size
     */
    var /**
     *  Twitter source impelementation.
     *  Fetch avatar source based on google identifier
     *  and image size
     */ Twitter = /** @class */ (function () {
        function Twitter(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.TWITTER;
        }
        /**
         * @param {?} size
         * @return {?}
         */
        Twitter.prototype.getAvatar = /**
         * @param {?} size
         * @return {?}
         */
            function (size) {
                /** @type {?} */
                var twitterImgSize = this.getImageSize(size);
                return "https://twitter.com/" + this.sourceId + "/profile_image?size=" + twitterImgSize;
            };
        /**
         * @param {?} size
         * @return {?}
         */
        Twitter.prototype.getImageSize = /**
         * @param {?} size
         * @return {?}
         */
            function (size) {
                if (size <= 24) {
                    return 'mini';
                }
                if (size <= 48) {
                    return 'normal';
                }
                if (size <= 73) {
                    return 'bigger';
                }
                return 'original';
            };
        return Twitter;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Google source impelementation.
     *  Fetch avatar source based on google identifier
     *  and image size
     */
    var /**
     *  Google source impelementation.
     *  Fetch avatar source based on google identifier
     *  and image size
     */ Google = /** @class */ (function (_super) {
        __extends(Google, _super);
        function Google(sourceId) {
            var _this = _super.call(this, sourceId) || this;
            _this.sourceType = AvatarSource.GOOGLE;
            return _this;
        }
        /**
         * @return {?}
         */
        Google.prototype.getAvatar = /**
         * @return {?}
         */
            function () {
                return "https://picasaweb.google.com/data/entry/api/user/" + this.sourceId + "?alt=json";
            };
        /**
         * Extract google avatar from json data
         */
        /**
         * Extract google avatar from json data
         * @param {?} data
         * @param {?=} size
         * @return {?}
         */
        Google.prototype.processResponse = /**
         * Extract google avatar from json data
         * @param {?} data
         * @param {?=} size
         * @return {?}
         */
            function (data, size) {
                /** @type {?} */
                var avatarSrc = data.entry.gphoto$thumbnail.$t;
                if (avatarSrc) {
                    return avatarSrc.replace('s64', 's' + size);
                }
            };
        return Google;
    }(AsyncSource));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Custom source impelementation.
     *  return custom image as an avatar
     *
     */
    var /**
     *  Custom source impelementation.
     *  return custom image as an avatar
     *
     */ Custom = /** @class */ (function () {
        function Custom(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.CUSTOM;
        }
        /**
         * @return {?}
         */
        Custom.prototype.getAvatar = /**
         * @return {?}
         */
            function () {
                return this.sourceId;
            };
        return Custom;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * Initials source impelementation.
     * return the initals of the given value
     */
    var /**
     * Initials source impelementation.
     * return the initals of the given value
     */ Initials = /** @class */ (function () {
        function Initials(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.INITIALS;
        }
        /**
         * @param {?} initialsSize
         * @return {?}
         */
        Initials.prototype.getAvatar = /**
         * @param {?} initialsSize
         * @return {?}
         */
            function (initialsSize) {
                return this.getInitials(this.sourceId, initialsSize);
            };
        /**
         * Returns the initial letters of a name in a string.
         */
        /**
         * Returns the initial letters of a name in a string.
         * @param {?} name
         * @param {?} size
         * @return {?}
         */
        Initials.prototype.getInitials = /**
         * Returns the initial letters of a name in a string.
         * @param {?} name
         * @param {?} size
         * @return {?}
         */
            function (name, size) {
                name = name ? name.trim() : null;
                if (!name) {
                    return '';
                }
                /** @type {?} */
                var initials = name.split(" ");
                if (size && size < initials.length) {
                    return this.constructInitials(initials.slice(0, size));
                }
                else {
                    return this.constructInitials(initials);
                }
            };
        /**
         * Iterates a person's name string to get the initials of each word in uppercase.
         */
        /**
         * Iterates a person's name string to get the initials of each word in uppercase.
         * @param {?} elements
         * @return {?}
         */
        Initials.prototype.constructInitials = /**
         * Iterates a person's name string to get the initials of each word in uppercase.
         * @param {?} elements
         * @return {?}
         */
            function (elements) {
                if (!elements || !elements.length) {
                    return '';
                }
                return elements
                    .filter(function (element) { return element && element.length > 0; })
                    .map(function (element) { return element[0].toUpperCase(); })
                    .join('');
            };
        return Initials;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Gravatar source impelementation.
     *  Fetch avatar source based on gravatar email
     */
    var /**
     *  Gravatar source impelementation.
     *  Fetch avatar source based on gravatar email
     */ Gravatar = /** @class */ (function () {
        function Gravatar(value) {
            this.value = value;
            this.sourceType = AvatarSource.GRAVATAR;
            this.sourceId = value.match('^[a-f0-9]{32}$') ? value : md5.Md5.hashStr(value).toString();
        }
        /**
         * @param {?} size
         * @return {?}
         */
        Gravatar.prototype.getAvatar = /**
         * @param {?} size
         * @return {?}
         */
            function (size) {
                /** @type {?} */
                var avatarSize = isRetina() ? size * 2 : size;
                return "https://secure.gravatar.com/avatar/" + this.sourceId + "?s=" + avatarSize + "&d=404";
            };
        return Gravatar;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Skype source impelementation.
     *  Fetch avatar source based on skype identifier
     */
    var /**
     *  Skype source impelementation.
     *  Fetch avatar source based on skype identifier
     */ Skype = /** @class */ (function () {
        function Skype(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.SKYPE;
        }
        /**
         * @return {?}
         */
        Skype.prototype.getAvatar = /**
         * @return {?}
         */
            function () {
                return "https://api.skype.com/users/" + this.sourceId + "/profile/avatar";
            };
        return Skype;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Value source impelementation.
     *  return the value as avatar
     */
    var /**
     *  Value source impelementation.
     *  return the value as avatar
     */ Value = /** @class */ (function () {
        function Value(sourceId) {
            this.sourceId = sourceId;
            this.sourceType = AvatarSource.VALUE;
        }
        /**
         * @return {?}
         */
        Value.prototype.getAvatar = /**
         * @return {?}
         */
            function () {
                return this.sourceId;
            };
        return Value;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Vkontakte source impelementation.
     *  Fetch avatar source based on vkontakte identifier
     *  and image size
     * @type {?}
     */
    var apiVersion = 5.8;
    var Vkontakte = /** @class */ (function (_super) {
        __extends(Vkontakte, _super);
        function Vkontakte(sourceId) {
            var _this = _super.call(this, sourceId) || this;
            _this.sourceType = AvatarSource.VKONTAKTE;
            return _this;
        }
        /**
         * @param {?} size
         * @return {?}
         */
        Vkontakte.prototype.getAvatar = /**
         * @param {?} size
         * @return {?}
         */
            function (size) {
                /** @type {?} */
                var imgSize = this.getImageSize(size);
                return "https://api.vk.com/method/users.get?user_id=" + this.sourceId + "&v=" + apiVersion + "&fields=" + imgSize;
            };
        /**
        * extract vkontakte avatar from json data
        */
        /**
         * extract vkontakte avatar from json data
         * @param {?} data
         * @return {?}
         */
        Vkontakte.prototype.processResponse = /**
         * extract vkontakte avatar from json data
         * @param {?} data
         * @return {?}
         */
            function (data) {
                // avatar key property is the size used to generate avatar url
                // size property is always the last key in the response object
                /** @type {?} */
                var sizeProperty = Object.keys(data['response'][0]).pop();
                // return avatar src
                return data['response'][0][sizeProperty];
            };
        /**
         * Returns image size related to vkontakte API
         * @param size
         */
        /**
         * Returns image size related to vkontakte API
         * @param {?} size
         * @return {?}
         */
        Vkontakte.prototype.getImageSize = /**
         * Returns image size related to vkontakte API
         * @param {?} size
         * @return {?}
         */
            function (size) {
                if (size <= 50) {
                    return 'photo_50';
                }
                if (size <= 100) {
                    return 'photo_100';
                }
                if (size <= 200) {
                    return 'photo_200';
                }
                return 'photo_max';
            };
        return Vkontakte;
    }(AsyncSource));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     *  Github source impelementation.
     *  Fetch avatar source based on github identifier
     */
    var /**
     *  Github source impelementation.
     *  Fetch avatar source based on github identifier
     */ Github = /** @class */ (function (_super) {
        __extends(Github, _super);
        function Github(sourceId) {
            var _this = _super.call(this, sourceId) || this;
            _this.sourceType = AvatarSource.GITHUB;
            return _this;
        }
        /**
         * @return {?}
         */
        Github.prototype.getAvatar = /**
         * @return {?}
         */
            function () {
                return "https://api.github.com/users/" + this.sourceId;
            };
        /**
        * extract github avatar from json data
        */
        /**
         * extract github avatar from json data
         * @param {?} data
         * @param {?=} size
         * @return {?}
         */
        Github.prototype.processResponse = /**
         * extract github avatar from json data
         * @param {?} data
         * @param {?=} size
         * @return {?}
         */
            function (data, size) {
                if (size) {
                    return data.avatar_url + "&s=" + size;
                }
                return data.avatar_url;
            };
        return Github;
    }(AsyncSource));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * Factory class that implements factory method pattern.
     * Used to create Source implementation class based
     * on the source Type
     */
    var SourceFactory = /** @class */ (function () {
        function SourceFactory() {
            this.sources = {};
            this.sources[AvatarSource.FACEBOOK] = Facebook;
            this.sources[AvatarSource.TWITTER] = Twitter;
            this.sources[AvatarSource.GOOGLE] = Google;
            this.sources[AvatarSource.SKYPE] = Skype;
            this.sources[AvatarSource.GRAVATAR] = Gravatar;
            this.sources[AvatarSource.CUSTOM] = Custom;
            this.sources[AvatarSource.INITIALS] = Initials;
            this.sources[AvatarSource.VALUE] = Value;
            this.sources[AvatarSource.VKONTAKTE] = Vkontakte;
            this.sources[AvatarSource.GITHUB] = Github;
        }
        /**
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
        SourceFactory.prototype.newInstance = /**
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
            function (sourceType, sourceValue) {
                return new this.sources[sourceType](sourceValue);
            };
        SourceFactory.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        SourceFactory.ctorParameters = function () { return []; };
        return SourceFactory;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * Token used to inject the AvatarConfig object
     * @type {?}
     */
    var AVATAR_CONFIG = new core.InjectionToken("avatar.config");

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * list of Supported avatar sources
     * @type {?}
     */
    var defaultSources = [
        AvatarSource.FACEBOOK,
        AvatarSource.GOOGLE,
        AvatarSource.TWITTER,
        AvatarSource.VKONTAKTE,
        AvatarSource.SKYPE,
        AvatarSource.GRAVATAR,
        AvatarSource.GITHUB,
        AvatarSource.CUSTOM,
        AvatarSource.INITIALS,
        AvatarSource.VALUE
    ];
    /**
     * list of default colors
     * @type {?}
     */
    var defaultColors = [
        "#1abc9c",
        "#3498db",
        "#f1c40f",
        "#8e44ad",
        "#e74c3c",
        "#d35400",
        "#2c3e50",
        "#7f8c8d"
    ];
    /**
     * Provides utilities methods related to Avatar component
     */
    var AvatarService = /** @class */ (function () {
        function AvatarService(avatarConfig, http$$1) {
            this.avatarConfig = avatarConfig;
            this.http = http$$1;
            this.avatarSources = defaultSources;
            this.avatarColors = defaultColors;
            if (this.avatarConfig) {
                this.overrideAvatarSources();
                this.overrideAvatarColors();
            }
        }
        /**
         * @param {?} avatarUrl
         * @return {?}
         */
        AvatarService.prototype.fetchAvatar = /**
         * @param {?} avatarUrl
         * @return {?}
         */
            function (avatarUrl) {
                return this.http.get(avatarUrl);
            };
        /**
         * @param {?} avatarText
         * @return {?}
         */
        AvatarService.prototype.getRandomColor = /**
         * @param {?} avatarText
         * @return {?}
         */
            function (avatarText) {
                if (!avatarText) {
                    return "transparent";
                }
                /** @type {?} */
                var asciiCodeSum = this.calculateAsciiCode(avatarText);
                return this.avatarColors[asciiCodeSum % this.avatarColors.length];
            };
        /**
         * @param {?} sourceType1
         * @param {?} sourceType2
         * @return {?}
         */
        AvatarService.prototype.copmareSources = /**
         * @param {?} sourceType1
         * @param {?} sourceType2
         * @return {?}
         */
            function (sourceType1, sourceType2) {
                return (this.getSourcePriority(sourceType1) - this.getSourcePriority(sourceType2));
            };
        /**
         * @param {?} source
         * @return {?}
         */
        AvatarService.prototype.isSource = /**
         * @param {?} source
         * @return {?}
         */
            function (source) {
                return this.avatarSources.includes(( /** @type {?} */(source)));
            };
        /**
         * @param {?} sourceType
         * @return {?}
         */
        AvatarService.prototype.isTextAvatar = /**
         * @param {?} sourceType
         * @return {?}
         */
            function (sourceType) {
                return [AvatarSource.INITIALS, AvatarSource.VALUE].includes(sourceType);
            };
        /**
         * @return {?}
         */
        AvatarService.prototype.overrideAvatarSources = /**
         * @return {?}
         */
            function () {
                // TODO: add sources to avatarConfig and implement this
            };
        /**
         * @return {?}
         */
        AvatarService.prototype.overrideAvatarColors = /**
         * @return {?}
         */
            function () {
                if (this.avatarConfig.colors && this.avatarConfig.colors.length > 0) {
                    this.avatarColors = this.avatarConfig.colors;
                }
            };
        /**
         * @param {?} value
         * @return {?}
         */
        AvatarService.prototype.calculateAsciiCode = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                return value
                    .split("")
                    .map(function (letter) { return letter.charCodeAt(0); })
                    .reduce(function (previous, current) { return previous + current; });
            };
        /**
         * @param {?} sourceType
         * @return {?}
         */
        AvatarService.prototype.getSourcePriority = /**
         * @param {?} sourceType
         * @return {?}
         */
            function (sourceType) {
                return this.avatarSources.indexOf(sourceType);
            };
        AvatarService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        AvatarService.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [AVATAR_CONFIG,] }] },
                { type: http.HttpClient }
            ];
        };
        return AvatarService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    /**
     * Universal avatar component that
     * generates avatar from different sources
     *
     * export
     * class AvatarComponent
     * implements {OnChanges}
     */
    var AvatarComponent = /** @class */ (function () {
        function AvatarComponent(elementRef, sourceFactory, avatarService) {
            this.elementRef = elementRef;
            this.sourceFactory = sourceFactory;
            this.avatarService = avatarService;
            this.round = true;
            this.size = 50;
            this.textSizeRatio = 3;
            this.fgColor = "#FFF";
            this.style = {};
            this.cornerRadius = 0;
            this.clickOnAvatar = new core.EventEmitter();
            this.avatarStyle = {};
            this.hostStyle = {};
            this._currentSource = 0;
            this._sources = Array();
        }
        // handle click event
        // handle click event
        /**
         * @param {?} event
         * @return {?}
         */
        AvatarComponent.prototype.handleClickEvent =
            // handle click event
            /**
             * @param {?} event
             * @return {?}
             */
            function (event) {
                if (event) {
                    this.clickOnAvatar.emit(this._sources[this._currentSource - 1]);
                }
            };
        /**
         * Detect inputs change
         *
         * param {{ [propKey: string]: SimpleChange }} changes
         *
         * memberof AvatarComponent
         */
        /**
         * Detect inputs change
         *
         * param {{ [propKey: string]: SimpleChange }} changes
         *
         * memberof AvatarComponent
         * @param {?} changes
         * @return {?}
         */
        AvatarComponent.prototype.ngOnChanges = /**
         * Detect inputs change
         *
         * param {{ [propKey: string]: SimpleChange }} changes
         *
         * memberof AvatarComponent
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                for (var propName in changes) {
                    if (this.avatarService.isSource(propName)) {
                        /** @type {?} */
                        var currentValue = changes[propName].currentValue;
                        this._addSource(AvatarSource[propName.toUpperCase()], currentValue);
                    }
                }
                // reintialize the avatar component when a source property value has changed
                // the fallback system must be re-invoked with the new values.
                this._initializeAvatar();
            };
        /**
         * Initialize the avatar component and its fallback system
         */
        /**
         * Initialize the avatar component and its fallback system
         * @return {?}
         */
        AvatarComponent.prototype._initializeAvatar = /**
         * Initialize the avatar component and its fallback system
         * @return {?}
         */
            function () {
                var _this = this;
                this._currentSource = 0;
                if (this._sources.length > 0 && this._sources[this._currentSource]) {
                    // Order sources array by source priority
                    this._sources.sort(function (source1, source2) { return _this.avatarService.copmareSources(source1.sourceType, source2.sourceType); });
                    // Host style
                    this.hostStyle = {
                        width: this.size + "px",
                        height: this.size + "px"
                    };
                    // Fetch avatar source
                    this.fetch();
                }
            };
        /**
         * Fetch avatar source
         *
         * param {any} event
         *
         * memberOf AvatarComponent
         */
        /**
         * Fetch avatar source
         *
         * param {any} event
         *
         * memberOf AvatarComponent
         * @param {?=} event
         * @return {?}
         */
        AvatarComponent.prototype.fetch = /**
         * Fetch avatar source
         *
         * param {any} event
         *
         * memberOf AvatarComponent
         * @param {?=} event
         * @return {?}
         */
            function (event) {
                /** @type {?} */
                var avatarSource = this._sources[this._currentSource];
                if (!avatarSource) {
                    return false;
                }
                if (this.avatarService.isTextAvatar(avatarSource.sourceType)) {
                    this.data = avatarSource.getAvatar(this.initialsSize);
                    this.src = undefined;
                    this.avatarStyle = this._initialsStyle(avatarSource.sourceId);
                }
                else {
                    this.avatarStyle = this._imageStyle();
                    if (avatarSource instanceof AsyncSource) {
                        this._fetchAsyncAvatar(avatarSource);
                    }
                    else {
                        this.src = avatarSource.getAvatar(this.size);
                    }
                }
                this._currentSource++;
            };
        /**
         *
         * returns initials style
         *
         * memberOf AvatarComponent
         */
        /**
         *
         * returns initials style
         *
         * memberOf AvatarComponent
         * @param {?} avatarValue
         * @return {?}
         */
        AvatarComponent.prototype._initialsStyle = /**
         *
         * returns initials style
         *
         * memberOf AvatarComponent
         * @param {?} avatarValue
         * @return {?}
         */
            function (avatarValue) {
                return __assign({ textAlign: "center", borderRadius: this.round ? "100%" : this.cornerRadius + "px", border: this.borderColor ? "1px solid " + this.borderColor : "", textTransform: "uppercase", color: this.fgColor, backgroundColor: this.bgColor
                        ? this.bgColor
                        : this.avatarService.getRandomColor(avatarValue), font: Math.floor(this.size / this.textSizeRatio) +
                        "px Helvetica, Arial, sans-serif", lineHeight: this.size + "px" }, this.style);
            };
        /**
         *
         * returns image style
         *
         * memberOf AvatarComponent
         */
        /**
         *
         * returns image style
         *
         * memberOf AvatarComponent
         * @return {?}
         */
        AvatarComponent.prototype._imageStyle = /**
         *
         * returns image style
         *
         * memberOf AvatarComponent
         * @return {?}
         */
            function () {
                return __assign({ maxWidth: "100%", borderRadius: this.round ? "50%" : this.cornerRadius + "px", border: this.borderColor ? "1px solid " + this.borderColor : "", width: this.size, height: this.size }, this.style);
            };
        /**
         * Fetch avatar image asynchrounsly.
         *
         * param {Source} source represents avatar source
         * memberof AvatarComponent
         */
        /**
         * Fetch avatar image asynchrounsly.
         *
         * param {Source} source represents avatar source
         * memberof AvatarComponent
         * @param {?} source
         * @return {?}
         */
        AvatarComponent.prototype._fetchAsyncAvatar = /**
         * Fetch avatar image asynchrounsly.
         *
         * param {Source} source represents avatar source
         * memberof AvatarComponent
         * @param {?} source
         * @return {?}
         */
            function (source) {
                var _this = this;
                this.avatarService.fetchAvatar(source.getAvatar()).subscribe(function (data) {
                    // extract avatar image from the response data
                    _this.src = source.processResponse(data, _this.size);
                }, function (err) {
                    console.error("ngx-avatar: error while fetching " + source.sourceType + " avatar ");
                });
            };
        /**
         * Add avatar source
         *
         * param sourceType avatar source type e.g facebook,twitter, etc.
         * param sourceValue  source value e.g facebookId value, etc.
         */
        /**
         * Add avatar source
         *
         * param sourceType avatar source type e.g facebook,twitter, etc.
         * param sourceValue  source value e.g facebookId value, etc.
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
        AvatarComponent.prototype._addSource = /**
         * Add avatar source
         *
         * param sourceType avatar source type e.g facebook,twitter, etc.
         * param sourceValue  source value e.g facebookId value, etc.
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
            function (sourceType, sourceValue) {
                if (sourceValue) {
                    if (!this._updateExistingSource(sourceType, sourceValue)) {
                        this._sources.push(this.sourceFactory.newInstance(sourceType, sourceValue));
                    }
                }
            };
        /**
         * This method check wether an avatar source has been added. If so
         * the source value will be updated with the new value passed as
         * paramater.
         * It returns true if the source exists and update has been performed,
         * returns false if the source was not found
         *
         * param {string} sourceType the type of the source
         * param {string} sourceValue the new value of the source
         *
         * memberof AvatarComponent
         */
        /**
         * This method check wether an avatar source has been added. If so
         * the source value will be updated with the new value passed as
         * paramater.
         * It returns true if the source exists and update has been performed,
         * returns false if the source was not found
         *
         * param {string} sourceType the type of the source
         * param {string} sourceValue the new value of the source
         *
         * memberof AvatarComponent
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
        AvatarComponent.prototype._updateExistingSource = /**
         * This method check wether an avatar source has been added. If so
         * the source value will be updated with the new value passed as
         * paramater.
         * It returns true if the source exists and update has been performed,
         * returns false if the source was not found
         *
         * param {string} sourceType the type of the source
         * param {string} sourceValue the new value of the source
         *
         * memberof AvatarComponent
         * @param {?} sourceType
         * @param {?} sourceValue
         * @return {?}
         */
            function (sourceType, sourceValue) {
                /** @type {?} */
                var sourceIndex = this._sources.findIndex(function (source) { return source.sourceType === sourceType.toUpperCase(); });
                if (sourceIndex > -1) {
                    this._sources[sourceIndex].sourceId = sourceValue;
                    return true;
                }
                return false;
            };
        AvatarComponent.decorators = [
            { type: core.Component, args: [{
                        // tslint:disable-next-line:component-selector
                        selector: "ngx-avatar",
                        template: "\n    <div (click)=\"handleClickEvent($event)\" class=\"avatar-container\" [ngStyle]=\"hostStyle\">\n    <img *ngIf=\"src\"\n      [src]=\"src\"\n      [width]=\"size\"\n      [height]=\"size\"\n      [ngStyle]=\"avatarStyle\"\n      (error)=\"fetch($event)\"\n      class=\"avatar-content\"\n     />\n\n   <div *ngIf=\"data && !src\"\n     [ngStyle]=\"avatarStyle\"\n     class=\"avatar-content\">{{data}}</div>\n   </div>",
                        styles: ["\n      :host {\n        border-radius: \"50%\";\n      }\n    "]
                    }] }
        ];
        /** @nocollapse */
        AvatarComponent.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: SourceFactory },
                { type: AvatarService }
            ];
        };
        AvatarComponent.propDecorators = {
            round: [{ type: core.Input }],
            size: [{ type: core.Input }],
            textSizeRatio: [{ type: core.Input }],
            bgColor: [{ type: core.Input }],
            fgColor: [{ type: core.Input }],
            borderColor: [{ type: core.Input }],
            style: [{ type: core.Input }],
            cornerRadius: [{ type: core.Input }],
            facebook: [{ type: core.Input, args: ["facebookId",] }],
            twitter: [{ type: core.Input, args: ["twitterId",] }],
            google: [{ type: core.Input, args: ["googleId",] }],
            vkontakte: [{ type: core.Input, args: ["vkontakteId",] }],
            skype: [{ type: core.Input, args: ["skypeId",] }],
            gravatar: [{ type: core.Input, args: ["gravatarId",] }],
            github: [{ type: core.Input, args: ["githubId",] }],
            custom: [{ type: core.Input, args: ["src",] }],
            initials: [{ type: core.Input, args: ["name",] }],
            value: [{ type: core.Input, args: ["value",] }],
            placeholder: [{ type: core.Input, args: ["placeholder",] }],
            initialsSize: [{ type: core.Input, args: ["initialsSize",] }],
            clickOnAvatar: [{ type: core.Output }]
        };
        return AvatarComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    var AvatarModule = /** @class */ (function () {
        function AvatarModule() {
        }
        /**
         * @param {?=} avatarConfig
         * @return {?}
         */
        AvatarModule.forRoot = /**
         * @param {?=} avatarConfig
         * @return {?}
         */
            function (avatarConfig) {
                return {
                    ngModule: AvatarModule,
                    providers: [
                        { provide: AVATAR_CONFIG, useValue: avatarConfig ? avatarConfig : {} }
                    ]
                };
            };
        AvatarModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            http.HttpClientModule
                        ],
                        declarations: [
                            AvatarComponent
                        ],
                        providers: [
                            SourceFactory,
                            AvatarService
                        ],
                        exports: [
                            AvatarComponent
                        ]
                    },] }
        ];
        return AvatarModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    exports.AvatarModule = AvatarModule;
    exports.ɵd = AVATAR_CONFIG;
    exports.ɵa = AvatarComponent;
    exports.ɵc = AvatarService;
    exports.ɵb = SourceFactory;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWF2YXRhci51bWQuanMubWFwIiwic291cmNlcyI6WyJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL2FzeW5jLXNvdXJjZS50cyIsIm5nOi8vbmd4LWF2YXRhci9saWIvc291cmNlcy9hdmF0YXItc291cmNlLmVudW0udHMiLCJuZzovL25neC1hdmF0YXIvbGliL3NvdXJjZXMvZmFjZWJvb2sudHMiLCJuZzovL25neC1hdmF0YXIvbGliL3NvdXJjZXMvdHdpdHRlci50cyIsIm5nOi8vbmd4LWF2YXRhci9saWIvc291cmNlcy9nb29nbGUudHMiLCJuZzovL25neC1hdmF0YXIvbGliL3NvdXJjZXMvY3VzdG9tLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL2luaXRpYWxzLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL2dyYXZhdGFyLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL3NreXBlLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL3ZhbHVlLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9zb3VyY2VzL3Zrb250YWt0ZS50cyIsIm5nOi8vbmd4LWF2YXRhci9saWIvc291cmNlcy9naXRodWIudHMiLCJuZzovL25neC1hdmF0YXIvbGliL3NvdXJjZXMvc291cmNlLmZhY3RvcnkudHMiLCJuZzovL25neC1hdmF0YXIvbGliL2F2YXRhci1jb25maWcudG9rZW4udHMiLCJuZzovL25neC1hdmF0YXIvbGliL2F2YXRhci5zZXJ2aWNlLnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9hdmF0YXIuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtYXZhdGFyL2xpYi9hdmF0YXIubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgU291cmNlIH0gZnJvbSAnLi9zb3VyY2UnO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSAnLi9hdmF0YXItc291cmNlLmVudW0nO1xuXG4vKipcbiAqIENvbnRyYWN0IG9mIGFsbCBhc3luYyBzb3VyY2VzLlxuICogRXZlcnkgYXN5bmMgc291cmNlIG11c3QgaW1wbGVtZW50IHRoZSBwcm9jZXNzUmVzcG9uc2UgbWV0aG9kIHRoYXQgZXh0cmFjdHMgdGhlIGF2YXRhciB1cmwgZnJvbSB0aGUgZGF0YVxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQXN5bmNTb3VyY2UgaW1wbGVtZW50cyBTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHNvdXJjZUlkOiBzdHJpbmcpIHsgfVxuXG4gIGFic3RyYWN0IGdldEF2YXRhcihzaXplPzogbnVtYmVyKTogc3RyaW5nO1xuICBhYnN0cmFjdCBwcm9jZXNzUmVzcG9uc2UoZGF0YTogYW55LCBzaXplPzogbnVtYmVyKTogc3RyaW5nO1xuXG59XG4iLCJleHBvcnQgZW51bSBBdmF0YXJTb3VyY2Uge1xuICBGQUNFQk9PSyA9IFwiZmFjZWJvb2tcIixcbiAgR09PR0xFID0gXCJnb29nbGVcIixcbiAgVFdJVFRFUiA9IFwidHdpdHRlclwiLFxuICBWS09OVEFLVEUgPSBcInZrb250YWt0ZVwiLFxuICBTS1lQRSA9IFwic2t5cGVcIixcbiAgR1JBVkFUQVIgPSBcImdyYXZhdGFyXCIsXG4gIEdJVEhVQiA9IFwiZ2l0aHViXCIsXG4gIENVU1RPTSA9IFwiY3VzdG9tXCIsXG4gIElOSVRJQUxTID0gXCJpbml0aWFsc1wiLFxuICBWQUxVRSA9IFwidmFsdWVcIlxufVxuIiwiaW1wb3J0IHsgU291cmNlIH0gZnJvbSAnLi9zb3VyY2UnO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSAnLi9hdmF0YXItc291cmNlLmVudW0nO1xuLyoqXG4gKiAgRmFjZWJvb2sgc291cmNlIGltcGVsZW1lbnRhdGlvbi5cbiAqICBGZXRjaCBhdmF0YXIgc291cmNlIGJhc2VkIG9uIGZhY2Vib29rIGlkZW50aWZpZXJcbiAqICBhbmQgaW1hZ2Ugc2l6ZVxuICovXG5leHBvcnQgY2xhc3MgRmFjZWJvb2sgaW1wbGVtZW50cyBTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuRkFDRUJPT0s7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHNvdXJjZUlkOiBzdHJpbmcpIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdmF0YXIoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgK1xuICAgICAgYCR7dGhpcy5zb3VyY2VJZH0vcGljdHVyZT93aWR0aD0ke3NpemV9JmhlaWdodD0ke3NpemV9YDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgU291cmNlIH0gZnJvbSAnLi9zb3VyY2UnO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSAnLi9hdmF0YXItc291cmNlLmVudW0nO1xuXG4vKipcbiAqICBUd2l0dGVyIHNvdXJjZSBpbXBlbGVtZW50YXRpb24uXG4gKiAgRmV0Y2ggYXZhdGFyIHNvdXJjZSBiYXNlZCBvbiBnb29nbGUgaWRlbnRpZmllclxuICogIGFuZCBpbWFnZSBzaXplXG4gKi9cbmV4cG9ydCBjbGFzcyBUd2l0dGVyIGltcGxlbWVudHMgU291cmNlIHtcbiAgcmVhZG9ubHkgc291cmNlVHlwZTogQXZhdGFyU291cmNlID0gQXZhdGFyU291cmNlLlRXSVRURVI7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHNvdXJjZUlkOiBzdHJpbmcpIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdmF0YXIoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCB0d2l0dGVySW1nU2l6ZSA9IHRoaXMuZ2V0SW1hZ2VTaXplKHNpemUpO1xuICAgIHJldHVybiBgaHR0cHM6Ly90d2l0dGVyLmNvbS8ke3RoaXMuc291cmNlSWR9L3Byb2ZpbGVfaW1hZ2U/c2l6ZT0ke3R3aXR0ZXJJbWdTaXplfWA7XG4gIH1cblxuICBwcml2YXRlIGdldEltYWdlU2l6ZShzaXplOiBudW1iZXIpIHtcbiAgICBpZiAoc2l6ZSA8PSAyNCkge1xuICAgICAgcmV0dXJuICdtaW5pJztcbiAgICB9XG5cbiAgICBpZiAoc2l6ZSA8PSA0OCkge1xuICAgICAgcmV0dXJuICdub3JtYWwnO1xuICAgIH1cblxuICAgIGlmIChzaXplIDw9IDczKSB7XG4gICAgICByZXR1cm4gJ2JpZ2dlcic7XG4gICAgfVxuXG4gICAgcmV0dXJuICdvcmlnaW5hbCc7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgQXN5bmNTb3VyY2UgfSBmcm9tICcuL2FzeW5jLXNvdXJjZSc7XG5pbXBvcnQgeyBBdmF0YXJTb3VyY2UgfSBmcm9tICcuL2F2YXRhci1zb3VyY2UuZW51bSc7XG5cbi8qKlxuICogIEdvb2dsZSBzb3VyY2UgaW1wZWxlbWVudGF0aW9uLlxuICogIEZldGNoIGF2YXRhciBzb3VyY2UgYmFzZWQgb24gZ29vZ2xlIGlkZW50aWZpZXJcbiAqICBhbmQgaW1hZ2Ugc2l6ZVxuICovXG5leHBvcnQgY2xhc3MgR29vZ2xlIGV4dGVuZHMgQXN5bmNTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuR09PR0xFO1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZUlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzb3VyY2VJZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXZhdGFyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBodHRwczovL3BpY2FzYXdlYi5nb29nbGUuY29tL2RhdGEvZW50cnkvYXBpL3VzZXIvJHt0aGlzLnNvdXJjZUlkfT9hbHQ9anNvbmA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGdvb2dsZSBhdmF0YXIgZnJvbSBqc29uIGRhdGFcbiAgICovXG4gIHB1YmxpYyBwcm9jZXNzUmVzcG9uc2UoZGF0YTogYW55LCBzaXplPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBhdmF0YXJTcmMgPSBkYXRhLmVudHJ5LmdwaG90byR0aHVtYm5haWwuJHQ7XG4gICAgaWYgKGF2YXRhclNyYykge1xuICAgICAgcmV0dXJuIGF2YXRhclNyYy5yZXBsYWNlKCdzNjQnLCAncycgKyBzaXplKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFNvdXJjZSB9IGZyb20gJy4vc291cmNlJztcbmltcG9ydCB7IEF2YXRhclNvdXJjZSB9IGZyb20gJy4vYXZhdGFyLXNvdXJjZS5lbnVtJztcbi8qKlxuICogIEN1c3RvbSBzb3VyY2UgaW1wZWxlbWVudGF0aW9uLlxuICogIHJldHVybiBjdXN0b20gaW1hZ2UgYXMgYW4gYXZhdGFyXG4gKlxuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tIGltcGxlbWVudHMgU291cmNlIHtcbiAgcmVhZG9ubHkgc291cmNlVHlwZTogQXZhdGFyU291cmNlID0gQXZhdGFyU291cmNlLkNVU1RPTTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgc291cmNlSWQ6IHN0cmluZykge1xuICB9XG5cbiAgcHVibGljIGdldEF2YXRhcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZUlkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTb3VyY2UgfSBmcm9tIFwiLi9zb3VyY2VcIjtcbmltcG9ydCB7IEF2YXRhclNvdXJjZSB9IGZyb20gXCIuL2F2YXRhci1zb3VyY2UuZW51bVwiO1xuXG4vKipcbiAqIEluaXRpYWxzIHNvdXJjZSBpbXBlbGVtZW50YXRpb24uXG4gKiByZXR1cm4gdGhlIGluaXRhbHMgb2YgdGhlIGdpdmVuIHZhbHVlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbml0aWFscyBpbXBsZW1lbnRzIFNvdXJjZSB7XG4gIFxuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuSU5JVElBTFM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHNvdXJjZUlkOiBzdHJpbmdcbiAgKSB7IH1cblxuICBwdWJsaWMgZ2V0QXZhdGFyKGluaXRpYWxzU2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbml0aWFscyh0aGlzLnNvdXJjZUlkLCBpbml0aWFsc1NpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluaXRpYWwgbGV0dGVycyBvZiBhIG5hbWUgaW4gYSBzdHJpbmcuXG4gICAqL1xuICBwcml2YXRlIGdldEluaXRpYWxzKG5hbWU6IHN0cmluZywgc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBcbiAgICBuYW1lID0gbmFtZSA/IG5hbWUudHJpbSgpIDogbnVsbDtcbiAgICBcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaW5pdGlhbHMgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBcbiAgICBpZiAoc2l6ZSAmJiBzaXplIDwgaW5pdGlhbHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RJbml0aWFscyhpbml0aWFscy5zbGljZSgwLCBzaXplKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdEluaXRpYWxzKGluaXRpYWxzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZXMgYSBwZXJzb24ncyBuYW1lIHN0cmluZyB0byBnZXQgdGhlIGluaXRpYWxzIG9mIGVhY2ggd29yZCBpbiB1cHBlcmNhc2UuXG4gICAqL1xuICBwcml2YXRlIGNvbnN0cnVjdEluaXRpYWxzKGVsZW1lbnRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgaWYgKCFlbGVtZW50cyB8fCAhZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnRzXG4gICAgICAuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudCAmJiBlbGVtZW50Lmxlbmd0aCA+IDApXG4gICAgICAubWFwKGVsZW1lbnQgPT4gZWxlbWVudFswXS50b1VwcGVyQ2FzZSgpKVxuICAgICAgLmpvaW4oJycpO1xuICB9XG59XG4iLCJpbXBvcnQgaXNSZXRpbmEgZnJvbSAnaXMtcmV0aW5hJztcbmltcG9ydCB7IE1kNSB9IGZyb20gJ3RzLW1kNS9kaXN0L21kNSc7XG5pbXBvcnQgeyBTb3VyY2UgfSBmcm9tICcuL3NvdXJjZSc7XG5pbXBvcnQgeyBBdmF0YXJTb3VyY2UgfSBmcm9tICcuL2F2YXRhci1zb3VyY2UuZW51bSc7XG5cbi8qKlxuICogIEdyYXZhdGFyIHNvdXJjZSBpbXBlbGVtZW50YXRpb24uXG4gKiAgRmV0Y2ggYXZhdGFyIHNvdXJjZSBiYXNlZCBvbiBncmF2YXRhciBlbWFpbFxuICovXG5leHBvcnQgY2xhc3MgR3JhdmF0YXIgaW1wbGVtZW50cyBTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuR1JBVkFUQVI7XG4gIHB1YmxpYyBzb3VyY2VJZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5zb3VyY2VJZCA9IHZhbHVlLm1hdGNoKCdeW2EtZjAtOV17MzJ9JCcpID8gdmFsdWUgOiBNZDUuaGFzaFN0cih2YWx1ZSkudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdmF0YXIoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBhdmF0YXJTaXplID0gaXNSZXRpbmEoKSA/IHNpemUgKiAyIDogc2l6ZTtcbiAgICByZXR1cm4gYGh0dHBzOi8vc2VjdXJlLmdyYXZhdGFyLmNvbS9hdmF0YXIvJHt0aGlzLnNvdXJjZUlkfT9zPSR7YXZhdGFyU2l6ZX0mZD00MDRgO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTb3VyY2UgfSBmcm9tICcuL3NvdXJjZSc7XG5pbXBvcnQgeyBBdmF0YXJTb3VyY2UgfSBmcm9tICcuL2F2YXRhci1zb3VyY2UuZW51bSc7XG4vKipcbiAqICBTa3lwZSBzb3VyY2UgaW1wZWxlbWVudGF0aW9uLlxuICogIEZldGNoIGF2YXRhciBzb3VyY2UgYmFzZWQgb24gc2t5cGUgaWRlbnRpZmllclxuICovXG5leHBvcnQgY2xhc3MgU2t5cGUgaW1wbGVtZW50cyBTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuU0tZUEU7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHNvdXJjZUlkOiBzdHJpbmcpIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdmF0YXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGh0dHBzOi8vYXBpLnNreXBlLmNvbS91c2Vycy8ke3RoaXMuc291cmNlSWR9L3Byb2ZpbGUvYXZhdGFyYDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgU291cmNlIH0gZnJvbSAnLi9zb3VyY2UnO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSAnLi9hdmF0YXItc291cmNlLmVudW0nO1xuXG4vKipcbiAqICBWYWx1ZSBzb3VyY2UgaW1wZWxlbWVudGF0aW9uLlxuICogIHJldHVybiB0aGUgdmFsdWUgYXMgYXZhdGFyXG4gKi9cbmV4cG9ydCBjbGFzcyBWYWx1ZSBpbXBsZW1lbnRzIFNvdXJjZSB7XG4gIHJlYWRvbmx5IHNvdXJjZVR5cGU6IEF2YXRhclNvdXJjZSA9IEF2YXRhclNvdXJjZS5WQUxVRTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgc291cmNlSWQ6IHN0cmluZykge1xuICB9XG5cbiAgcHVibGljIGdldEF2YXRhcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZUlkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBc3luY1NvdXJjZSB9IGZyb20gJy4vYXN5bmMtc291cmNlJztcbmltcG9ydCB7IEF2YXRhclNvdXJjZSB9IGZyb20gJy4vYXZhdGFyLXNvdXJjZS5lbnVtJztcblxuLyoqXG4gKiAgVmtvbnRha3RlIHNvdXJjZSBpbXBlbGVtZW50YXRpb24uXG4gKiAgRmV0Y2ggYXZhdGFyIHNvdXJjZSBiYXNlZCBvbiB2a29udGFrdGUgaWRlbnRpZmllclxuICogIGFuZCBpbWFnZSBzaXplXG4gKi9cbmNvbnN0IGFwaVZlcnNpb24gPSA1Ljg7XG5leHBvcnQgY2xhc3MgVmtvbnRha3RlIGV4dGVuZHMgQXN5bmNTb3VyY2Uge1xuICByZWFkb25seSBzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UgPSBBdmF0YXJTb3VyY2UuVktPTlRBS1RFO1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZUlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzb3VyY2VJZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXZhdGFyKHNpemU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaW1nU2l6ZSA9IHRoaXMuZ2V0SW1hZ2VTaXplKHNpemUpO1xuICAgIHJldHVybiBgaHR0cHM6Ly9hcGkudmsuY29tL21ldGhvZC91c2Vycy5nZXQ/dXNlcl9pZD0ke3RoaXMuc291cmNlSWR9JnY9JHthcGlWZXJzaW9ufSZmaWVsZHM9JHtpbWdTaXplfWA7XG4gIH1cblxuICAgLyoqXG4gICAqIGV4dHJhY3QgdmtvbnRha3RlIGF2YXRhciBmcm9tIGpzb24gZGF0YVxuICAgKi9cbiAgcHVibGljIHByb2Nlc3NSZXNwb25zZShkYXRhOiBhbnkpOiBzdHJpbmcge1xuICAgIC8vIGF2YXRhciBrZXkgcHJvcGVydHkgaXMgdGhlIHNpemUgdXNlZCB0byBnZW5lcmF0ZSBhdmF0YXIgdXJsXG4gICAgLy8gc2l6ZSBwcm9wZXJ0eSBpcyBhbHdheXMgdGhlIGxhc3Qga2V5IGluIHRoZSByZXNwb25zZSBvYmplY3RcbiAgICBjb25zdCBzaXplUHJvcGVydHkgPSBPYmplY3Qua2V5cyhkYXRhWydyZXNwb25zZSddWzBdKS5wb3AoKTtcbiAgICAvLyByZXR1cm4gYXZhdGFyIHNyY1xuICAgIHJldHVybiBkYXRhWydyZXNwb25zZSddWzBdW3NpemVQcm9wZXJ0eV07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpbWFnZSBzaXplIHJlbGF0ZWQgdG8gdmtvbnRha3RlIEFQSVxuICAgKiBAcGFyYW0gc2l6ZVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRJbWFnZVNpemUoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoc2l6ZSA8PSA1MCkge1xuICAgICAgcmV0dXJuICdwaG90b181MCc7XG4gICAgfVxuXG4gICAgaWYgKHNpemUgPD0gMTAwKSB7XG4gICAgICByZXR1cm4gJ3Bob3RvXzEwMCc7XG4gICAgfVxuXG4gICAgaWYgKHNpemUgPD0gMjAwKSB7XG4gICAgICByZXR1cm4gJ3Bob3RvXzIwMCc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdwaG90b19tYXgnO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IEFzeW5jU291cmNlIH0gZnJvbSAnLi9hc3luYy1zb3VyY2UnO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSAnLi9hdmF0YXItc291cmNlLmVudW0nO1xuXG4vKipcbiAqICBHaXRodWIgc291cmNlIGltcGVsZW1lbnRhdGlvbi5cbiAqICBGZXRjaCBhdmF0YXIgc291cmNlIGJhc2VkIG9uIGdpdGh1YiBpZGVudGlmaWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBHaXRodWIgZXh0ZW5kcyBBc3luY1NvdXJjZSB7XG4gIHJlYWRvbmx5IHNvdXJjZVR5cGU6IEF2YXRhclNvdXJjZSA9IEF2YXRhclNvdXJjZS5HSVRIVUI7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlSWQ6IHN0cmluZykge1xuICAgIHN1cGVyKHNvdXJjZUlkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdmF0YXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJHt0aGlzLnNvdXJjZUlkfWA7XG4gIH1cblxuICAvKipcbiAgKiBleHRyYWN0IGdpdGh1YiBhdmF0YXIgZnJvbSBqc29uIGRhdGFcbiAgKi9cbiBwdWJsaWMgcHJvY2Vzc1Jlc3BvbnNlKGRhdGE6IGFueSwgc2l6ZT86IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHNpemUpIHtcbiAgICAgIHJldHVybiBgJHtkYXRhLmF2YXRhcl91cmx9JnM9JHtzaXplfWA7XG4gICAgfVxuICAgIHJldHVybiBkYXRhLmF2YXRhcl91cmw7XG4gIH1cblxuXG59XG4iLCJpbXBvcnQgeyBTb3VyY2UgfSBmcm9tIFwiLi9zb3VyY2VcIjtcbmltcG9ydCB7IEZhY2Vib29rIH0gZnJvbSBcIi4vZmFjZWJvb2tcIjtcbmltcG9ydCB7IFR3aXR0ZXIgfSBmcm9tIFwiLi90d2l0dGVyXCI7XG5pbXBvcnQgeyBHb29nbGUgfSBmcm9tIFwiLi9nb29nbGVcIjtcbmltcG9ydCB7IEN1c3RvbSB9IGZyb20gXCIuL2N1c3RvbVwiO1xuaW1wb3J0IHsgSW5pdGlhbHMgfSBmcm9tIFwiLi9pbml0aWFsc1wiO1xuaW1wb3J0IHsgR3JhdmF0YXIgfSBmcm9tIFwiLi9ncmF2YXRhclwiO1xuaW1wb3J0IHsgU2t5cGUgfSBmcm9tIFwiLi9za3lwZVwiO1xuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi92YWx1ZVwiO1xuaW1wb3J0IHsgVmtvbnRha3RlIH0gZnJvbSBcIi4vdmtvbnRha3RlXCI7XG5pbXBvcnQgeyBHaXRodWIgfSBmcm9tIFwiLi9naXRodWJcIjtcblxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBTb3VyY2VDcmVhdG9yIH0gZnJvbSBcIi4vc291cmNlLmNyZWF0b3JcIjtcbmltcG9ydCB7IEF2YXRhclNvdXJjZSB9IGZyb20gXCIuL2F2YXRhci1zb3VyY2UuZW51bVwiO1xuXG4vKipcbiAqIEZhY3RvcnkgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIGZhY3RvcnkgbWV0aG9kIHBhdHRlcm4uXG4gKiBVc2VkIHRvIGNyZWF0ZSBTb3VyY2UgaW1wbGVtZW50YXRpb24gY2xhc3MgYmFzZWRcbiAqIG9uIHRoZSBzb3VyY2UgVHlwZVxuICovXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgU291cmNlRmFjdG9yeSB7XG4gIHByaXZhdGUgc291cmNlczogeyBba2V5OiBzdHJpbmddOiBTb3VyY2VDcmVhdG9yIH0gPSB7fTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNvdXJjZXNbQXZhdGFyU291cmNlLkZBQ0VCT09LXSA9IEZhY2Vib29rO1xuICAgIHRoaXMuc291cmNlc1tBdmF0YXJTb3VyY2UuVFdJVFRFUl0gPSBUd2l0dGVyO1xuICAgIHRoaXMuc291cmNlc1tBdmF0YXJTb3VyY2UuR09PR0xFXSA9IEdvb2dsZTtcbiAgICB0aGlzLnNvdXJjZXNbQXZhdGFyU291cmNlLlNLWVBFXSA9IFNreXBlO1xuICAgIHRoaXMuc291cmNlc1tBdmF0YXJTb3VyY2UuR1JBVkFUQVJdID0gR3JhdmF0YXI7XG4gICAgdGhpcy5zb3VyY2VzW0F2YXRhclNvdXJjZS5DVVNUT01dID0gQ3VzdG9tO1xuICAgIHRoaXMuc291cmNlc1tBdmF0YXJTb3VyY2UuSU5JVElBTFNdID0gSW5pdGlhbHM7XG4gICAgdGhpcy5zb3VyY2VzW0F2YXRhclNvdXJjZS5WQUxVRV0gPSBWYWx1ZTtcbiAgICB0aGlzLnNvdXJjZXNbQXZhdGFyU291cmNlLlZLT05UQUtURV0gPSBWa29udGFrdGU7XG4gICAgdGhpcy5zb3VyY2VzW0F2YXRhclNvdXJjZS5HSVRIVUJdID0gR2l0aHViO1xuICB9XG5cbiAgcHVibGljIG5ld0luc3RhbmNlKHNvdXJjZVR5cGU6IEF2YXRhclNvdXJjZSwgc291cmNlVmFsdWU6IHN0cmluZyk6IFNvdXJjZSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzLnNvdXJjZXNbc291cmNlVHlwZV0oc291cmNlVmFsdWUpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IEF2YXRhckNvbmZpZyB9IGZyb20gXCIuL2F2YXRhci1jb25maWdcIjtcbi8qKlxuICogVG9rZW4gdXNlZCB0byBpbmplY3QgdGhlIEF2YXRhckNvbmZpZyBvYmplY3RcbiAqL1xuZXhwb3J0IGNvbnN0IEFWQVRBUl9DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW48QXZhdGFyQ29uZmlnPihcImF2YXRhci5jb25maWdcIik7XG4iLCJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIjtcblxuaW1wb3J0IHsgQVZBVEFSX0NPTkZJRyB9IGZyb20gXCIuL2F2YXRhci1jb25maWcudG9rZW5cIjtcbmltcG9ydCB7IEF2YXRhckNvbmZpZyB9IGZyb20gXCIuL2F2YXRhci1jb25maWdcIjtcbmltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCwgT3B0aW9uYWwgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQXZhdGFyU291cmNlIH0gZnJvbSBcIi4vc291cmNlcy9hdmF0YXItc291cmNlLmVudW1cIjtcblxuLyoqXG4gKiBsaXN0IG9mIFN1cHBvcnRlZCBhdmF0YXIgc291cmNlc1xuICovXG5jb25zdCBkZWZhdWx0U291cmNlcyA9IFtcbiAgQXZhdGFyU291cmNlLkZBQ0VCT09LLFxuICBBdmF0YXJTb3VyY2UuR09PR0xFLFxuICBBdmF0YXJTb3VyY2UuVFdJVFRFUixcbiAgQXZhdGFyU291cmNlLlZLT05UQUtURSxcbiAgQXZhdGFyU291cmNlLlNLWVBFLFxuICBBdmF0YXJTb3VyY2UuR1JBVkFUQVIsXG4gIEF2YXRhclNvdXJjZS5HSVRIVUIsXG4gIEF2YXRhclNvdXJjZS5DVVNUT00sXG4gIEF2YXRhclNvdXJjZS5JTklUSUFMUyxcbiAgQXZhdGFyU291cmNlLlZBTFVFXG5dO1xuXG4vKipcbiAqIGxpc3Qgb2YgZGVmYXVsdCBjb2xvcnNcbiAqL1xuY29uc3QgZGVmYXVsdENvbG9ycyA9IFtcbiAgXCIjMWFiYzljXCIsXG4gIFwiIzM0OThkYlwiLFxuICBcIiNmMWM0MGZcIixcbiAgXCIjOGU0NGFkXCIsXG4gIFwiI2U3NGMzY1wiLFxuICBcIiNkMzU0MDBcIixcbiAgXCIjMmMzZTUwXCIsXG4gIFwiIzdmOGM4ZFwiXG5dO1xuXG4vKipcbiAqIFByb3ZpZGVzIHV0aWxpdGllcyBtZXRob2RzIHJlbGF0ZWQgdG8gQXZhdGFyIGNvbXBvbmVudFxuICovXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQXZhdGFyU2VydmljZSB7XG4gIHB1YmxpYyBhdmF0YXJTb3VyY2VzOiBBdmF0YXJTb3VyY2VbXSA9IGRlZmF1bHRTb3VyY2VzO1xuICBwdWJsaWMgYXZhdGFyQ29sb3JzOiBzdHJpbmdbXSA9IGRlZmF1bHRDb2xvcnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKClcbiAgICBASW5qZWN0KEFWQVRBUl9DT05GSUcpXG4gICAgcHJpdmF0ZSBhdmF0YXJDb25maWc6IEF2YXRhckNvbmZpZyxcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnRcbiAgKSB7XG4gICAgaWYgKHRoaXMuYXZhdGFyQ29uZmlnKSB7XG4gICAgICB0aGlzLm92ZXJyaWRlQXZhdGFyU291cmNlcygpO1xuICAgICAgdGhpcy5vdmVycmlkZUF2YXRhckNvbG9ycygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmZXRjaEF2YXRhcihhdmF0YXJVcmw6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoYXZhdGFyVXJsKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSYW5kb21Db2xvcihhdmF0YXJUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghYXZhdGFyVGV4dCkge1xuICAgICAgcmV0dXJuIFwidHJhbnNwYXJlbnRcIjtcbiAgICB9XG4gICAgY29uc3QgYXNjaWlDb2RlU3VtID0gdGhpcy5jYWxjdWxhdGVBc2NpaUNvZGUoYXZhdGFyVGV4dCk7XG4gICAgcmV0dXJuIHRoaXMuYXZhdGFyQ29sb3JzW2FzY2lpQ29kZVN1bSAlIHRoaXMuYXZhdGFyQ29sb3JzLmxlbmd0aF07XG4gIH1cblxuICBwdWJsaWMgY29wbWFyZVNvdXJjZXMoXG4gICAgc291cmNlVHlwZTE6IEF2YXRhclNvdXJjZSxcbiAgICBzb3VyY2VUeXBlMjogQXZhdGFyU291cmNlXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZ2V0U291cmNlUHJpb3JpdHkoc291cmNlVHlwZTEpIC0gdGhpcy5nZXRTb3VyY2VQcmlvcml0eShzb3VyY2VUeXBlMilcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGlzU291cmNlKHNvdXJjZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYXZhdGFyU291cmNlcy5pbmNsdWRlcyhzb3VyY2UgYXMgQXZhdGFyU291cmNlKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1RleHRBdmF0YXIoc291cmNlVHlwZTogQXZhdGFyU291cmNlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFtBdmF0YXJTb3VyY2UuSU5JVElBTFMsIEF2YXRhclNvdXJjZS5WQUxVRV0uaW5jbHVkZXMoc291cmNlVHlwZSk7XG4gIH1cblxuICBwcml2YXRlIG92ZXJyaWRlQXZhdGFyU291cmNlcygpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBhZGQgc291cmNlcyB0byBhdmF0YXJDb25maWcgYW5kIGltcGxlbWVudCB0aGlzXG4gIH1cblxuICBwcml2YXRlIG92ZXJyaWRlQXZhdGFyQ29sb3JzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmF2YXRhckNvbmZpZy5jb2xvcnMgJiYgdGhpcy5hdmF0YXJDb25maWcuY29sb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXZhdGFyQ29sb3JzID0gdGhpcy5hdmF0YXJDb25maWcuY29sb3JzO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQXNjaWlDb2RlKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB2YWx1ZVxuICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAubWFwKGxldHRlciA9PiBsZXR0ZXIuY2hhckNvZGVBdCgwKSlcbiAgICAgIC5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiBwcmV2aW91cyArIGN1cnJlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTb3VyY2VQcmlvcml0eShzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5hdmF0YXJTb3VyY2VzLmluZGV4T2Yoc291cmNlVHlwZSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIEVsZW1lbnRSZWYsXG4gIE9uQ2hhbmdlcyxcbiAgU2ltcGxlQ2hhbmdlXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IFNvdXJjZSB9IGZyb20gXCIuL3NvdXJjZXMvc291cmNlXCI7XG5pbXBvcnQgeyBBc3luY1NvdXJjZSB9IGZyb20gXCIuL3NvdXJjZXMvYXN5bmMtc291cmNlXCI7XG5pbXBvcnQgeyBTb3VyY2VGYWN0b3J5IH0gZnJvbSBcIi4vc291cmNlcy9zb3VyY2UuZmFjdG9yeVwiO1xuaW1wb3J0IHsgQXZhdGFyU2VydmljZSB9IGZyb20gXCIuL2F2YXRhci5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBBdmF0YXJTb3VyY2UgfSBmcm9tIFwiLi9zb3VyY2VzL2F2YXRhci1zb3VyY2UuZW51bVwiO1xuXG4vKipcbiAqIFVuaXZlcnNhbCBhdmF0YXIgY29tcG9uZW50IHRoYXRcbiAqIGdlbmVyYXRlcyBhdmF0YXIgZnJvbSBkaWZmZXJlbnQgc291cmNlc1xuICpcbiAqIGV4cG9ydFxuICogY2xhc3MgQXZhdGFyQ29tcG9uZW50XG4gKiBpbXBsZW1lbnRzIHtPbkNoYW5nZXN9XG4gKi9cblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6IFwibmd4LWF2YXRhclwiLFxuICBzdHlsZXM6IFtcbiAgICBgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IFwiNTAlXCI7XG4gICAgICB9XG4gICAgYFxuICBdLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgKGNsaWNrKT1cImhhbmRsZUNsaWNrRXZlbnQoJGV2ZW50KVwiIGNsYXNzPVwiYXZhdGFyLWNvbnRhaW5lclwiIFtuZ1N0eWxlXT1cImhvc3RTdHlsZVwiPlxuICAgIDxpbWcgKm5nSWY9XCJzcmNcIlxuICAgICAgW3NyY109XCJzcmNcIlxuICAgICAgW3dpZHRoXT1cInNpemVcIlxuICAgICAgW2hlaWdodF09XCJzaXplXCJcbiAgICAgIFtuZ1N0eWxlXT1cImF2YXRhclN0eWxlXCJcbiAgICAgIChlcnJvcik9XCJmZXRjaCgkZXZlbnQpXCJcbiAgICAgIGNsYXNzPVwiYXZhdGFyLWNvbnRlbnRcIlxuICAgICAvPlxuXG4gICA8ZGl2ICpuZ0lmPVwiZGF0YSAmJiAhc3JjXCJcbiAgICAgW25nU3R5bGVdPVwiYXZhdGFyU3R5bGVcIlxuICAgICBjbGFzcz1cImF2YXRhci1jb250ZW50XCI+e3tkYXRhfX08L2Rpdj5cbiAgIDwvZGl2PmBcbn0pXG5leHBvcnQgY2xhc3MgQXZhdGFyQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgQElucHV0KClcbiAgcm91bmQ6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKVxuICBzaXplOiBudW1iZXIgPSA1MDtcbiAgQElucHV0KClcbiAgdGV4dFNpemVSYXRpbzogbnVtYmVyID0gMztcbiAgQElucHV0KClcbiAgYmdDb2xvcjogc3RyaW5nO1xuICBASW5wdXQoKVxuICBmZ0NvbG9yID0gXCIjRkZGXCI7XG4gIEBJbnB1dCgpXG4gIGJvcmRlckNvbG9yOiBzdHJpbmc7XG4gIEBJbnB1dCgpXG4gIHN0eWxlOiBhbnkgPSB7fTtcbiAgQElucHV0KClcbiAgY29ybmVyUmFkaXVzID0gMDtcbiAgQElucHV0KFwiZmFjZWJvb2tJZFwiKVxuICBmYWNlYm9vazogc3RyaW5nO1xuICBASW5wdXQoXCJ0d2l0dGVySWRcIilcbiAgdHdpdHRlcjogc3RyaW5nO1xuICBASW5wdXQoXCJnb29nbGVJZFwiKVxuICBnb29nbGU6IHN0cmluZztcbiAgQElucHV0KFwidmtvbnRha3RlSWRcIilcbiAgdmtvbnRha3RlOiBzdHJpbmc7XG4gIEBJbnB1dChcInNreXBlSWRcIilcbiAgc2t5cGU6IHN0cmluZztcbiAgQElucHV0KFwiZ3JhdmF0YXJJZFwiKVxuICBncmF2YXRhcjogc3RyaW5nO1xuICBASW5wdXQoXCJnaXRodWJJZFwiKVxuICBnaXRodWI6IHN0cmluZztcbiAgQElucHV0KFwic3JjXCIpXG4gIGN1c3RvbTogc3RyaW5nO1xuICBASW5wdXQoXCJuYW1lXCIpXG4gIGluaXRpYWxzOiBzdHJpbmc7XG4gIEBJbnB1dChcInZhbHVlXCIpXG4gIHZhbHVlOiBzdHJpbmc7XG4gIEBJbnB1dChcInBsYWNlaG9sZGVyXCIpXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gIEBJbnB1dChcImluaXRpYWxzU2l6ZVwiKVxuICBpbml0aWFsc1NpemU6IG51bWJlcjtcbiAgQE91dHB1dCgpXG4gIGNsaWNrT25BdmF0YXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLy8gYXZhdGFyIGltZyBzcmNcbiAgcHVibGljIHNyYzogc3RyaW5nO1xuICAvLyBhdmF0YXIgdGV4dCB2YWx1ZVxuICBwdWJsaWMgZGF0YTogc3RyaW5nO1xuICBwdWJsaWMgYXZhdGFyU3R5bGU6IGFueSA9IHt9O1xuICBwdWJsaWMgaG9zdFN0eWxlOiBhbnkgPSB7fTtcblxuICBwcml2YXRlIF9jdXJyZW50U291cmNlID0gMDtcbiAgcHJpdmF0ZSBfc291cmNlczogU291cmNlW10gPSBBcnJheSgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHB1YmxpYyBzb3VyY2VGYWN0b3J5OiBTb3VyY2VGYWN0b3J5LFxuICAgIHByaXZhdGUgYXZhdGFyU2VydmljZTogQXZhdGFyU2VydmljZVxuICApIHsgfVxuXG4gIC8vIGhhbmRsZSBjbGljayBldmVudFxuICBoYW5kbGVDbGlja0V2ZW50KGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuY2xpY2tPbkF2YXRhci5lbWl0KHRoaXMuX3NvdXJjZXNbdGhpcy5fY3VycmVudFNvdXJjZSAtIDFdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGlucHV0cyBjaGFuZ2VcbiAgICpcbiAgICogcGFyYW0ge3sgW3Byb3BLZXk6IHN0cmluZ106IFNpbXBsZUNoYW5nZSB9fSBjaGFuZ2VzXG4gICAqXG4gICAqIG1lbWJlcm9mIEF2YXRhckNvbXBvbmVudFxuICAgKi9cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogeyBbcHJvcEtleTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlIH0pIHtcbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIGNoYW5nZXMpIHtcbiAgICAgIGlmICh0aGlzLmF2YXRhclNlcnZpY2UuaXNTb3VyY2UocHJvcE5hbWUpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGNoYW5nZXNbcHJvcE5hbWVdLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgdGhpcy5fYWRkU291cmNlKEF2YXRhclNvdXJjZVtwcm9wTmFtZS50b1VwcGVyQ2FzZSgpXSwgY3VycmVudFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcmVpbnRpYWxpemUgdGhlIGF2YXRhciBjb21wb25lbnQgd2hlbiBhIHNvdXJjZSBwcm9wZXJ0eSB2YWx1ZSBoYXMgY2hhbmdlZFxuICAgIC8vIHRoZSBmYWxsYmFjayBzeXN0ZW0gbXVzdCBiZSByZS1pbnZva2VkIHdpdGggdGhlIG5ldyB2YWx1ZXMuXG4gICAgdGhpcy5faW5pdGlhbGl6ZUF2YXRhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGF2YXRhciBjb21wb25lbnQgYW5kIGl0cyBmYWxsYmFjayBzeXN0ZW1cbiAgICovXG4gIF9pbml0aWFsaXplQXZhdGFyKCkge1xuICAgIHRoaXMuX2N1cnJlbnRTb3VyY2UgPSAwO1xuICAgIGlmICh0aGlzLl9zb3VyY2VzLmxlbmd0aCA+IDAgJiYgdGhpcy5fc291cmNlc1t0aGlzLl9jdXJyZW50U291cmNlXSkge1xuICAgICAgLy8gT3JkZXIgc291cmNlcyBhcnJheSBieSBzb3VyY2UgcHJpb3JpdHlcbiAgICAgIHRoaXMuX3NvdXJjZXMuc29ydCgoc291cmNlMSwgc291cmNlMikgPT4gdGhpcy5hdmF0YXJTZXJ2aWNlLmNvcG1hcmVTb3VyY2VzKHNvdXJjZTEuc291cmNlVHlwZSwgc291cmNlMi5zb3VyY2VUeXBlKSk7XG4gICAgICAvLyBIb3N0IHN0eWxlXG4gICAgICB0aGlzLmhvc3RTdHlsZSA9IHtcbiAgICAgICAgd2lkdGg6IHRoaXMuc2l6ZSArIFwicHhcIixcbiAgICAgICAgaGVpZ2h0OiB0aGlzLnNpemUgKyBcInB4XCJcbiAgICAgIH07XG4gICAgICAvLyBGZXRjaCBhdmF0YXIgc291cmNlXG4gICAgICB0aGlzLmZldGNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGF2YXRhciBzb3VyY2VcbiAgICpcbiAgICogcGFyYW0ge2FueX0gZXZlbnRcbiAgICpcbiAgICogbWVtYmVyT2YgQXZhdGFyQ29tcG9uZW50XG4gICAqL1xuICBmZXRjaChldmVudD86IGFueSkge1xuICAgIGNvbnN0IGF2YXRhclNvdXJjZSA9IHRoaXMuX3NvdXJjZXNbdGhpcy5fY3VycmVudFNvdXJjZV07XG4gICAgaWYgKCFhdmF0YXJTb3VyY2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuYXZhdGFyU2VydmljZS5pc1RleHRBdmF0YXIoYXZhdGFyU291cmNlLnNvdXJjZVR5cGUpKSB7XG4gICAgICB0aGlzLmRhdGEgPSBhdmF0YXJTb3VyY2UuZ2V0QXZhdGFyKHRoaXMuaW5pdGlhbHNTaXplKTtcbiAgICAgIHRoaXMuc3JjID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5hdmF0YXJTdHlsZSA9IHRoaXMuX2luaXRpYWxzU3R5bGUoYXZhdGFyU291cmNlLnNvdXJjZUlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdmF0YXJTdHlsZSA9IHRoaXMuX2ltYWdlU3R5bGUoKTtcbiAgICAgIGlmIChhdmF0YXJTb3VyY2UgaW5zdGFuY2VvZiBBc3luY1NvdXJjZSkge1xuICAgICAgICB0aGlzLl9mZXRjaEFzeW5jQXZhdGFyKGF2YXRhclNvdXJjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNyYyA9IGF2YXRhclNvdXJjZS5nZXRBdmF0YXIodGhpcy5zaXplKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fY3VycmVudFNvdXJjZSsrO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIHJldHVybnMgaW5pdGlhbHMgc3R5bGVcbiAgICpcbiAgICogbWVtYmVyT2YgQXZhdGFyQ29tcG9uZW50XG4gICAqL1xuICBfaW5pdGlhbHNTdHlsZShhdmF0YXJWYWx1ZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgIGJvcmRlclJhZGl1czogdGhpcy5yb3VuZCA/IFwiMTAwJVwiIDogdGhpcy5jb3JuZXJSYWRpdXMgKyBcInB4XCIsXG4gICAgICBib3JkZXI6IHRoaXMuYm9yZGVyQ29sb3IgPyBcIjFweCBzb2xpZCBcIiArIHRoaXMuYm9yZGVyQ29sb3IgOiBcIlwiLFxuICAgICAgdGV4dFRyYW5zZm9ybTogXCJ1cHBlcmNhc2VcIixcbiAgICAgIGNvbG9yOiB0aGlzLmZnQ29sb3IsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuYmdDb2xvclxuICAgICAgICA/IHRoaXMuYmdDb2xvclxuICAgICAgICA6IHRoaXMuYXZhdGFyU2VydmljZS5nZXRSYW5kb21Db2xvcihhdmF0YXJWYWx1ZSksXG4gICAgICBmb250OlxuICAgICAgICBNYXRoLmZsb29yKHRoaXMuc2l6ZSAvIHRoaXMudGV4dFNpemVSYXRpbykgK1xuICAgICAgICBcInB4IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZcIixcbiAgICAgIGxpbmVIZWlnaHQ6IHRoaXMuc2l6ZSArIFwicHhcIixcbiAgICAgIC4uLnRoaXMuc3R5bGVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIHJldHVybnMgaW1hZ2Ugc3R5bGVcbiAgICpcbiAgICogbWVtYmVyT2YgQXZhdGFyQ29tcG9uZW50XG4gICAqL1xuICBfaW1hZ2VTdHlsZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWF4V2lkdGg6IFwiMTAwJVwiLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGlzLnJvdW5kID8gXCI1MCVcIiA6IHRoaXMuY29ybmVyUmFkaXVzICsgXCJweFwiLFxuICAgICAgYm9yZGVyOiB0aGlzLmJvcmRlckNvbG9yID8gXCIxcHggc29saWQgXCIgKyB0aGlzLmJvcmRlckNvbG9yIDogXCJcIixcbiAgICAgIHdpZHRoOiB0aGlzLnNpemUsXG4gICAgICBoZWlnaHQ6IHRoaXMuc2l6ZSxcbiAgICAgIC4uLnRoaXMuc3R5bGVcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhdmF0YXIgaW1hZ2UgYXN5bmNocm91bnNseS5cbiAgICpcbiAgICogcGFyYW0ge1NvdXJjZX0gc291cmNlIHJlcHJlc2VudHMgYXZhdGFyIHNvdXJjZVxuICAgKiBtZW1iZXJvZiBBdmF0YXJDb21wb25lbnRcbiAgICovXG4gIF9mZXRjaEFzeW5jQXZhdGFyKHNvdXJjZTogQXN5bmNTb3VyY2UpIHtcbiAgICB0aGlzLmF2YXRhclNlcnZpY2UuZmV0Y2hBdmF0YXIoc291cmNlLmdldEF2YXRhcigpKS5zdWJzY3JpYmUoXG4gICAgICBkYXRhID0+IHtcbiAgICAgICAgLy8gZXh0cmFjdCBhdmF0YXIgaW1hZ2UgZnJvbSB0aGUgcmVzcG9uc2UgZGF0YVxuICAgICAgICB0aGlzLnNyYyA9IHNvdXJjZS5wcm9jZXNzUmVzcG9uc2UoZGF0YSwgdGhpcy5zaXplKTtcbiAgICAgIH0sXG4gICAgICBlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBuZ3gtYXZhdGFyOiBlcnJvciB3aGlsZSBmZXRjaGluZyAke3NvdXJjZS5zb3VyY2VUeXBlfSBhdmF0YXIgYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGF2YXRhciBzb3VyY2VcbiAgICpcbiAgICogcGFyYW0gc291cmNlVHlwZSBhdmF0YXIgc291cmNlIHR5cGUgZS5nIGZhY2Vib29rLHR3aXR0ZXIsIGV0Yy5cbiAgICogcGFyYW0gc291cmNlVmFsdWUgIHNvdXJjZSB2YWx1ZSBlLmcgZmFjZWJvb2tJZCB2YWx1ZSwgZXRjLlxuICAgKi9cbiAgX2FkZFNvdXJjZShzb3VyY2VUeXBlOiBBdmF0YXJTb3VyY2UsIHNvdXJjZVZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAoc291cmNlVmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5fdXBkYXRlRXhpc3RpbmdTb3VyY2Uoc291cmNlVHlwZSwgc291cmNlVmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3NvdXJjZXMucHVzaChcbiAgICAgICAgICB0aGlzLnNvdXJjZUZhY3RvcnkubmV3SW5zdGFuY2Uoc291cmNlVHlwZSwgc291cmNlVmFsdWUpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBjaGVjayB3ZXRoZXIgYW4gYXZhdGFyIHNvdXJjZSBoYXMgYmVlbiBhZGRlZC4gSWYgc29cbiAgICogdGhlIHNvdXJjZSB2YWx1ZSB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IHZhbHVlIHBhc3NlZCBhc1xuICAgKiBwYXJhbWF0ZXIuXG4gICAqIEl0IHJldHVybnMgdHJ1ZSBpZiB0aGUgc291cmNlIGV4aXN0cyBhbmQgdXBkYXRlIGhhcyBiZWVuIHBlcmZvcm1lZCxcbiAgICogcmV0dXJucyBmYWxzZSBpZiB0aGUgc291cmNlIHdhcyBub3QgZm91bmRcbiAgICpcbiAgICogcGFyYW0ge3N0cmluZ30gc291cmNlVHlwZSB0aGUgdHlwZSBvZiB0aGUgc291cmNlXG4gICAqIHBhcmFtIHtzdHJpbmd9IHNvdXJjZVZhbHVlIHRoZSBuZXcgdmFsdWUgb2YgdGhlIHNvdXJjZVxuICAgKlxuICAgKiBtZW1iZXJvZiBBdmF0YXJDb21wb25lbnRcbiAgICovXG4gIF91cGRhdGVFeGlzdGluZ1NvdXJjZShzb3VyY2VUeXBlOiBzdHJpbmcsIHNvdXJjZVZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzb3VyY2VJbmRleCA9IHRoaXMuX3NvdXJjZXMuZmluZEluZGV4KFxuICAgICAgc291cmNlID0+IHNvdXJjZS5zb3VyY2VUeXBlID09PSBzb3VyY2VUeXBlLnRvVXBwZXJDYXNlKClcbiAgICApO1xuICAgIGlmIChzb3VyY2VJbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLl9zb3VyY2VzW3NvdXJjZUluZGV4XS5zb3VyY2VJZCA9IHNvdXJjZVZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBIdHRwQ2xpZW50TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQXZhdGFyQ29tcG9uZW50IH0gZnJvbSAnLi9hdmF0YXIuY29tcG9uZW50JztcbmltcG9ydCB7IFNvdXJjZUZhY3RvcnkgfSBmcm9tICcuL3NvdXJjZXMvc291cmNlLmZhY3RvcnknO1xuaW1wb3J0IHsgQXZhdGFyU2VydmljZSB9IGZyb20gJy4vYXZhdGFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXZhdGFyQ29uZmlnIH0gZnJvbSAnLi9hdmF0YXItY29uZmlnJztcbmltcG9ydCB7IEFWQVRBUl9DT05GSUcgfSBmcm9tICcuL2F2YXRhci1jb25maWcudG9rZW4nO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEh0dHBDbGllbnRNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgQXZhdGFyQ29tcG9uZW50XG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIFNvdXJjZUZhY3RvcnksXG4gICAgQXZhdGFyU2VydmljZVxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgQXZhdGFyQ29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQXZhdGFyTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoYXZhdGFyQ29uZmlnPzogQXZhdGFyQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBBdmF0YXJNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgeyBwcm92aWRlOiBBVkFUQVJfQ09ORklHLCB1c2VWYWx1ZTogYXZhdGFyQ29uZmlnID8gYXZhdGFyQ29uZmlnOnt9IH1dXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInRzbGliXzEuX19leHRlbmRzIiwiTWQ1IiwiSW5qZWN0YWJsZSIsIkluamVjdGlvblRva2VuIiwiaHR0cCIsIk9wdGlvbmFsIiwiSW5qZWN0IiwiSHR0cENsaWVudCIsIkV2ZW50RW1pdHRlciIsIkNvbXBvbmVudCIsIkVsZW1lbnRSZWYiLCJJbnB1dCIsIk91dHB1dCIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIiwiSHR0cENsaWVudE1vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7SUFBQTs7Ozs7Ozs7Ozs7Ozs7SUFjQTtJQUVBLElBQUksYUFBYSxHQUFHLFVBQVMsQ0FBQyxFQUFFLENBQUM7UUFDN0IsYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO2FBQ2hDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxZQUFZLEtBQUssSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzVFLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUUsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztvQkFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMvRSxPQUFPLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL0IsQ0FBQyxDQUFDO0FBRUYsYUFBZ0IsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzFCLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEIsU0FBUyxFQUFFLEtBQUssSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENB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